<% provide(:title, "Receta") %>

<p>
  <strong>Título:</strong>
  <%= @receta.titulo %>
</p>

<p>
  <strong>Cuerpo:</strong>
  <%= @receta.cuerpo %>
</p>

<p>
  <strong>Introducción:</strong>
  <%= @receta.introduccion %>
</p>

<p>
  <strong>Ingredientes:</strong>
  <%= @receta.ingredientes %>
</p>

<p>
  <strong>Instrucciones:</strong>
  <%= @receta.instrucciones %>
</p>

<div class="user-info">
  <p>
    <strong>Autor:</strong>
    <%= link_to @receta.user.username, @receta.user %>
  </p>
  <%= @receta.user.avatar.attached? ? image_tag(@receta.user.avatar.variant(resize_to_limit: [120, 120])) : nil %>
</div>

<p>
  <strong>Habilitada:</strong>
  <%= @receta.habilitado? ? "Sí" : "No" %>
</p>

<p>
  <strong>Categoría:</strong>
  <%= @receta.categoria_receta.nombre %>
</p>

<p>
  <strong>Puntajes:</strong>
  <ul>
    <% @receta.puntajes.each do |punt| %>
      <li>
        @<%= User.find(punt[0]).username %>: <%= punt[1]%>
      </li>
    <% end %>
  </ul>
</p>

<div class='multimedia'>
  <strong>Multimedia:</strong>
  <% @receta.imagenes.any? && @receta.imagenes.each_with_index do |img, i| %>
    <% case img.blob.content_type %>
    <% when 'video/mp4', 'video/mpg', 'video/mpeg' %>
      <video controls>
        <source src=<%= asset_url_for(img, device: 'web') %> />
      </video>
    <% when "image/jpg", "image/jpeg", "image/png", "image/gif" %>
      <%= image_tag(asset_url_for(img, device: 'web')) %>
    <% end %>
  <% end %>
</div>

<div class="botonera">
  <%= link_to 'Editar', edit_receta_path(@receta), class: "btn btn-info" %>
  <%= link_to 'Volver', recetas_path, class: "btn btn-default" %>
</div>