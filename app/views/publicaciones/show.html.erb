<% provide(:title, "Publicación") %>

<p>
  <strong>Título:</strong>
  <%= @publicacion.titulo %>
</p>

<p>
  <strong>Cuerpo:</strong>
  <%= @publicacion.cuerpo %>
</p>

<div class="user-info">
  <p>
    <strong>Autor:</strong>
    <%= link_to @publicacion.user.username, @publicacion.user %>
  </p>
  <%= @publicacion.user.avatar.attached? ? image_tag(@publicacion.user.avatar.variant(resize_to_limit: [120, 120])) : nil %>
</div>

<!--
<p>
  <strong>Cuerpo Rich:</strong>
  <%= @publicacion.cuerpo_rich %>
</p>
-->

<p>
  <strong>Ciudad:</strong>
  <%= @publicacion.ciudad.nombre %>
</p>

<p>
  <strong>Habilitada:</strong>
  <%= @publicacion.habilitado? ? "Sí" : "No" %>
</p>

<p>
  <strong>Categoría:</strong>
  <%= @publicacion.categoria_publicacion.nombre %>
</p>

<p>
  <strong>Puntajes:</strong>
  <ul>
    <% @publicacion.puntajes.each do |punt| %>
      <li>
        @<%= User.find(punt[0]).username %>: <%= punt[1]%>
      </li>
    <% end %>
  </ul>
</p>

<div class='multimedia'>
  <strong>Multimedia:</strong>
  <% @publicacion.imagenes.any? && @publicacion.imagenes.each_with_index do |img, i| %>
    <% case img.blob.content_type %>
    <% when 'video/mp4', 'video/mpg', 'video/mpeg' %>
      <video controls>
        <source src=<%= asset_url_for(img, device: 'web') %> />
      </video>
    <% when 'image/jpg', 'image/jpeg', 'image/png', "image/gif" %>
      <%= image_tag(asset_url_for(img, device: 'web')) %>
    <% end %>
  <% end %>
</div>

<div class="botonera">
  <%= link_to 'Editar', edit_publicacion_path(@publicacion), class: "btn btn-info" %>
  <%= link_to 'Volver', publicaciones_path, class: "btn btn-default" %>
</div>